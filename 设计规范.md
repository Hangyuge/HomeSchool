# 家校通设计规范

## 角色

家校通业务中的角色有四种：管理员、教师、家长、学生。
考虑到本产品的目标用户集中在小学校，因此学生角色不能登录客户端。

教师、家长主要登录客户端使用业务。
管理员主要使用 web 端发布通知。

## 功能
1. 教室可以发布通知
2. 布置作业
3. 交流**(正在做)**
4. 公布成绩

待讨论:
1. 学生安全签到系统

## 设计

### 1. 消息推送
`jpush(极光推送)` 推送限制为 1K，因此想要靠推送实现发送消息的想法不能实现。
为了解决该问题，我们使用推送来告诉客户端有新消息通知,当然这个消息可能是聊天消息、好友添加消息、通知消息等。
推送中包含该消息的id，凭借此 id，客户端可以从接口获取到具体的 `Message`。然后判断该消息类型，进一步处理该消息。

### 2. 消息的时效期
极光推送消息的最长等待时间为 10 天，也就是说超过这个时间，即使客户端上线，也不会推送消息。
解决方案： 
  **讨论中**

### 2. 消息队列
为了能够实现添加好友的功能，服务端必须有一个消息队列。
  ** 讨论中**


